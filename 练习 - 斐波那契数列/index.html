<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // 递归
        function fib_1(n) {
            if (n == 1 || n == 2) {
                return 1;
            } else {
                return fib_1(n - 2) + fib_1(n - 1);
            }
        }

        // 尾递归优化
        function fib_1_pro(n, current = 0, next = 1) {
            if (n === 1) return next;
            if (n === 0) return 0;
            return fib_1_pro(n - 1, next, current + next);
        }

        // 非递归
        function fibonacci(n) {
            let current = 0;
            let next = 1;
            let temp;
            for (let i = 0; i < n; i++) {
                temp = current;
                current = next;
                next += temp;
            }
            return current;
        }

        // 缓存
        function fib(n) {
            let cache = [0, 1, 1]
            function _fib(n) {
                if (cache[n]) return cache[n]
                cache[n] = _fib(n - 1) + _fib(n - 2)
                return cache[n]
            }
            return _fib(n)
        }

        // 动态规划（推荐）
        var fib = function (n) {
            if (n < 2) {
                return n;
            }
            let p = 0, q = 0, r = 1;
            for (let i = 2; i <= n; i++) {
                p = q;
                q = r;
                r = p + q;
            }
            return r;
        };
    </script>
</body>

</html>